{
  "version": "jemima-maths-chain-guidance-1",
  "purpose": "Creator-facing guidance + machine-checkable constraints for building five-beat maths-story packs with one final integer answer and optional per-round reveals for the fastest player.",
  "compatible_reader_version": "jemima-maths-chain-1",
  "style_voice": {
    "narrator": "Jemima (first person or close third), playful, British English, concise.",
    "beats_length": "Each beat is 1–2 sentences.",
    "beats_numbers": "Each beat must introduce 1–2 numbers that participate in the running calculation.",
    "cohesion": "All five beats form a single, coherent mini-story (what Jemima did / someone she knows / a project / food or a party prep).",
    "units": "Use explicit units when sensible (metres, km, minutes, euros, kcal). Keep the arithmetic integer-only."
  },
  "schema_contract": {
    "root.version": "jemima-maths-chain-1",
    "root.meta": {
      "roomCode": "string — exactly 3 uppercase letters",
      "generatedAt": "ISO-8601 datetime string",
      "hostUid": "string",
      "guestUid": "string"
    },
    "root.maths": {
      "location": "string (short setting)",
      "beats": "array[string] — length === 5; each non-empty; each 1–2 sentences; each contains 1–2 numeric values used in the running calculation",
      "question": "string — short, contains a visible blank ___",
      "answer": "integer — final whole-number result of the beats’ running calculation"
    },
    "root.integrity": {
      "checksum": "string — sha256 hex (filled by encryptor)",
      "verified": "boolean — true after encryption"
    }
  },
  "validation_requirements_for_reader": {
    "version_equals": "jemima-maths-chain-1",
    "beats_count_equals": 5,
    "question_must_include_blank": "___",
    "answer_is_integer": true,
    "all_numbers_integer_only_rule": "Every operation across beats must result in an integer at each step. Permitted ops: +, −, × small integers, ÷ small integers where division is exact, doubling/halving, min/max, clamp-by-integers. No fractions/decimals in intermediate steps.",
    "units_rule": "If a unit is named in a beat, it is narrative only unless converted to an integer that participates in the arithmetic (e.g., '1000 metres in a km').",
    "cohesion_rule": "Beats must reference the same setting/task/storyline; no disjoint trivia lists."
  },
  "final_question_requirements": {
    "tone": "short, teasing, playful",
    "must_have_blank": "___",
    "examples_do_not_use_verbatim": [
      "The time has come — do you know the number? ___",
      "It’s more than 10, but how many more? ___",
      "Just put a number, any number. ___",
      "Be brave — what’s the total? ___",
      "All added up — what’s the answer? ___"
    ]
  },
  "reveal_policy_for_fastest_player": {
    "when": "At the start of the next round, only for the fastest player of the previous round.",
    "content_types": {
      "obvious_friendly_facts": [
        "There are 7 days in a week.",
        "There are 60 minutes in an hour.",
        "There are 1000 metres in a kilometre.",
        "A triangle has 180 degrees.",
        "There are 12 months in a year."
      ],
      "specific_fixed_facts": [
        "Length of an Olympic swimming pool: 50 metres.",
        "Number of keys on a modern piano: 88.",
        "Sheets in a ream of office paper: 500.",
        "Players on a football (soccer) team: 11.",
        "Bones in an adult human skeleton: 206."
      ],
      "creator_research_examples_require_freezing_a_value": [
        "Distance between two named cities (e.g., Dublin ↔ London) — pick one canonical value and state the unit.",
        "Average weight of a baby elephant (specify species/age and unit, then freeze a number).",
        "Height of a famous landmark (e.g., Eiffel Tower) — choose one authoritative value and unit.",
        "Population of a small island/town (as of a given year) — freeze the number and year."
      ]
    },
    "rules": [
      "Reveals must be short (≈1 sentence).",
      "If a reveal is specific, the creator must research and freeze a single canonical number in the pack’s narrative or in an internal notes field during generation.",
      "Do not contradict numeric values already used in the beats."
    ]
  },
  "topics_and_themes_guidance": {
    "may_use": [
      "Cooking/meal prep (shopping lists, portions, timings, oven minutes).",
      "Travel prep (packing lists, steps, flight durations converted to minutes).",
      "Party planning (guests, chairs, balloons, slices).",
      "Small DIY projects (screws, planks, paint tins, coats).",
      "Pet routines (walk minutes, treats, toys).",
      "School club or rehearsal (bars of music, minutes of practice)."
    ],
    "encourage_creativity": "Invent a fresh narrative each time. Vary settings, characters, and the kinds of numbers.",
    "avoid": [
      "Sensitive topics (medical dosages beyond simple counts, finances with personally identifying details).",
      "Ambiguous or region-variant facts unless you freeze one canonical value."
    ]
  },
  "calculation_design_rules": {
    "start_number_suggestions": [
      "180 (degrees in a triangle)",
      "360 (degrees in a circle)",
      "1000 (metres in a km)",
      "7 (days in a week)",
      "12 (months in a year)",
      "24 (hours in a day)"
    ],
    "allowed_operations": [
      "Add/subtract small known counts (e.g., wheels on a car = 4).",
      "Multiply by small counts (e.g., letters in 'CAT' = 3).",
      "Divide by exact divisors (e.g., divide by 2, 3, 4 where exact).",
      "Double/halve."
    ],
    "keep_integer_every_step": true,
    "numbers_per_beat": "1–2 numeric values per beat; both should be used or justified narratively.",
    "complexity_target": "Primary school mental maths: totals typically between 0 and 1000.",
    "sanity_examples_of_numbers_to_pull_from": [
      "50 (Olympic pool length, metres)",
      "88 (piano keys)",
      "11 (players in a football team)",
      "8 (spider legs)",
      "5 (fingers on a hand)",
      "6 (letters in 'JEMIMA')",
      "31 (days in some months) or 7 (months with 31 days) — choose one and be explicit",
      "14 (pounds in a stone)",
      "100 (centimetres in a metre)",
      "12 (eggs in a dozen)"
    ]
  },
  "inspiration_examples_DO_NOT_USE_IN_GENERATION": [
    {
      "title": "Museum Morning",
      "location": "Museum",
      "beats": [
        "I start with the 180 degrees of a neat little triangle.",
        "I add 4 for the sides of the square on the gallery floor.",
        "Then I multiply by the 3 letters in 'CAT' I see on a postcard.",
        "I subtract 2 for the days of the weekend when the gallery closes early.",
        "Finally, I add 7 for the days in a week of sketching practice."
      ],
      "question": "All tallied, what’s my final number? ___",
      "answer_worked": "(((180 + 4) × 3) − 2) + 7 = 549",
      "answer": 549
    },
    {
      "title": "Picnic Prep",
      "location": "Park",
      "beats": [
        "I begin with 1000, because there are 1000 metres in a kilometre around the lake.",
        "I subtract 365 for the days it took me to perfect my sandwich.",
        "I divide that by 5 for the fingers holding it together (an exact split!).",
        "Then I add 12 for the months I’ve been planning this picnic.",
        "And I double it, because I invited my neighbour too."
      ],
      "question": "Be a sport — what’s the number? ___",
      "answer_worked": "(((1000 − 365) ÷ 5) + 12) × 2 = 278",
      "answer": 278
    },
    {
      "title": "Piano Tuning",
      "location": "Music Room",
      "beats": [
        "I count 88 keys on the piano before breakfast.",
        "I add 11 for a football team’s worth of students who might play.",
        "Then I divide everything by 3, because only a trio turns up.",
        "I add 7 for the days I’ll keep the piano open for practice.",
        "Finally, I multiply by 5 for the fingers in a good solid chord."
      ],
      "question": "Final chord struck — what’s the total? ___",
      "answer_worked": "(((88 + 11) ÷ 3) + 7) × 5 = 200",
      "answer": 200
    }
  ],
  "fact_prompts_inspiration_ALLOWED_BUT_MUST_BE_MADE_UNIQUE": {
    "obvious_facts_pool": [
      "Days in a week (7)",
      "Minutes in an hour (60)",
      "Metres in a kilometre (1000)",
      "Degrees in a triangle (180)",
      "Months in a year (12)"
    ],
    "specific_facts_pool_creator_to_freeze": [
      "Length of an Olympic swimming pool (metres)",
      "Average number of steps up a named landmark (exact integer)",
      "Sheets in a ream (500)",
      "Keys on a piano (88)",
      "Bones in adult human skeleton (206)",
      "Sides on standard dice (6)",
      "Players in various sports teams (verify the sport!)"
    ],
    "geography_examples_creator_to_research": [
      "Distance between two cities you pick (choose unit and freeze the integer).",
      "Height of a specified mountain/hill you pick (metres).",
      "Length of a named bridge/river segment (metres or km, then convert to an integer if needed)."
    ],
    "animal_examples_creator_to_research": [
      "Average heartbeats per minute of a small animal (choose species; freeze integer).",
      "Average weight of a baby elephant (specify species/age window; freeze integer and unit).",
      "Number of teeth of a particular species (integer)."
    ]
  },
  "generator_instructions": [
    "Pick a setting and micro-plot Jemima can narrate.",
    "Choose a safe start integer (commonly 7, 12, 24, 50, 88, 100, 180, 360, 1000).",
    "Plan 5 beats. Each beat introduces 1–2 numbers and applies an operation that keeps the running total an integer.",
    "Write each beat as 1–2 snappy sentences, include numbers plainly and any units.",
    "Compute the final integer carefully (double-check arithmetic).",
    "Write a short playful final question that includes a visible blank ___ .",
    "Set `maths.answer` to the exact final integer.",
    "Optional: If you plan fastest-player reveals, note which facts could be revealed (obvious or specific) and ensure they match values in beats."
  ],
  "serialization_template": {
    "version": "jemima-maths-chain-1",
    "meta": {
      "roomCode": "CAT",
      "generatedAt": "2025-10-18T21:00:00Z",
      "hostUid": "demo-host",
      "guestUid": "demo-guest"
    },
    "maths": {
      "location": "Bakery",
      "beats": [
        "Beat 1 (1–2 sentences, includes 1–2 numbers used in the calc).",
        "Beat 2 …",
        "Beat 3 …",
        "Beat 4 …",
        "Beat 5 …"
      ],
      "question": "Short, teasing, includes ___",
      "answer": 123
    },
    "integrity": {
      "checksum": "will_be_filled_in_automatically",
      "verified": true
    }
  },
  "strict_prohibitions": [
    "Do NOT copy any text or numeric sequence from the examples in `inspiration_examples_DO_NOT_USE_IN_GENERATION`.",
    "Do NOT output those example stories, numbers, or final totals verbatim.",
    "If using specific facts (distance/weights/etc.), research and freeze a single integer and unit, then keep that value consistent."
  ]
}