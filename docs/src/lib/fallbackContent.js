// Auto-generated fallback pools derived from root question/maths packs.
// Do not edit manually; regenerate via agent tooling if the source packs change.

const QUESTION_POOL = {
  "host": [
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which British monarch's 1953 coronation was the first to be televised?",
      "correct_answer": "Elizabeth II",
      "distractors": {
        "easy": "Edward VIII",
        "medium": "Edward VIII",
        "hard": "Edward VIII"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which cat breed is famous for its naturally folded ears?",
      "correct_answer": "Scottish Fold",
      "distractors": {
        "easy": "Bengal",
        "medium": "Bengal",
        "hard": "Bengal"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "What is the capital city of Finland?",
      "correct_answer": "Helsinki",
      "distractors": {
        "easy": "Stockholm",
        "medium": "Stockholm",
        "hard": "Stockholm"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which treaty signed in 1921 created the Irish Free State?",
      "correct_answer": "Anglo-Irish Treaty",
      "distractors": {
        "easy": "Treaty of Limerick",
        "medium": "Treaty of Limerick",
        "hard": "Treaty of Limerick"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which Athenian statesman is credited with introducing the Council of 500 reforms?",
      "correct_answer": "Cleisthenes",
      "distractors": {
        "easy": "Solon",
        "medium": "Solon",
        "hard": "Solon"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which composer created the orchestral suite 'Water Music' for King George I?",
      "correct_answer": "George Frideric Handel",
      "distractors": {
        "easy": "Henry Purcell",
        "medium": "Henry Purcell",
        "hard": "Henry Purcell"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which Roman emperor completed the construction of the Colosseum?",
      "correct_answer": "Titus",
      "distractors": {
        "easy": "Domitian",
        "medium": "Domitian",
        "hard": "Domitian"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which 14th-century pandemic significantly reduced Europe's population?",
      "correct_answer": "The Black Death",
      "distractors": {
        "easy": "The Justinian Plague",
        "medium": "The Justinian Plague",
        "hard": "The Justinian Plague"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which hero slew the Calydonian boar with the help of Atalanta?",
      "correct_answer": "Meleager",
      "distractors": {
        "easy": "Bellerophon",
        "medium": "Bellerophon",
        "hard": "Bellerophon"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which 1916 battle is remembered for the first major use of tanks in warfare?",
      "correct_answer": "Battle of the Somme",
      "distractors": {
        "easy": "Battle of Cambrai",
        "medium": "Battle of Cambrai",
        "hard": "Battle of Cambrai"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which Renaissance artist painted the fresco cycle 'The Legend of the True Cross' in Arezzo?",
      "correct_answer": "Piero della Francesca",
      "distractors": {
        "easy": "Andrea Mantegna",
        "medium": "Andrea Mantegna",
        "hard": "Andrea Mantegna"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which Norse god is associated with the ship Skidbladnir, said to always have favorable wind?",
      "correct_answer": "Frey",
      "distractors": {
        "easy": "Njord",
        "medium": "Njord",
        "hard": "Njord"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Which leader delivered the 2005 'Citizenship Ceremony' speech outlining Australia's values at Parliament House in Canberra?",
      "correct_answer": "John Howard",
      "distractors": {
        "easy": "Kevin Rudd",
        "medium": "Kevin Rudd",
        "hard": "Kevin Rudd"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Mount Elbrus rises in which mountain range that bridges Europe and Asia?",
      "correct_answer": "Caucasus Mountains",
      "distractors": {
        "easy": "Urals",
        "medium": "Urals",
        "hard": "Urals"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Which game show introduced the 'Switch the Question' lifeline during its 2004 Super Millionaire run?",
      "correct_answer": "Who Wants to Be a Millionaire?",
      "distractors": {
        "easy": "The Weakest Link",
        "medium": "The Weakest Link",
        "hard": "The Weakest Link"
      }
    }
  ],
  "guest": [
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which sitcom features the fictional paper company Dunder Mifflin?",
      "correct_answer": "The Office",
      "distractors": {
        "easy": "Brooklyn Nine-Nine",
        "medium": "Brooklyn Nine-Nine",
        "hard": "Brooklyn Nine-Nine"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which singer released the 1994 hit single 'Baby Baby'?",
      "correct_answer": "Amy Grant",
      "distractors": {
        "easy": "Toni Braxton",
        "medium": "Toni Braxton",
        "hard": "Toni Braxton"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "The Seine River flows through which European capital city?",
      "correct_answer": "Paris",
      "distractors": {
        "easy": "Brussels",
        "medium": "Brussels",
        "hard": "Brussels"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which duo released the 1984 single 'Wake Me Up Before You Go-Go'?",
      "correct_answer": "Wham!",
      "distractors": {
        "easy": "Tears for Fears",
        "medium": "Tears for Fears",
        "hard": "Tears for Fears"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "Which long-running British soap opera is set around Albert Square in Walford?",
      "correct_answer": "EastEnders",
      "distractors": {
        "easy": "Emmerdale",
        "medium": "Emmerdale",
        "hard": "Emmerdale"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "pub",
      "question": "What is the term for a verb that requires a direct object to complete its meaning?",
      "correct_answer": "Transitive verb",
      "distractors": {
        "easy": "Auxiliary verb",
        "medium": "Auxiliary verb",
        "hard": "Auxiliary verb"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which fictional New Mexico city is the primary setting for 'Better Call Saul'?",
      "correct_answer": "Albuquerque",
      "distractors": {
        "easy": "Las Cruces",
        "medium": "Las Cruces",
        "hard": "Las Cruces"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which character wields the Ebony Blade in Marvel Comics canon?",
      "correct_answer": "Black Knight",
      "distractors": {
        "easy": "Captain Britain",
        "medium": "Captain Britain",
        "hard": "Captain Britain"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "What punctuation mark is used to denote the omission of letters within a single word, as in 'rock 'n' roll'?",
      "correct_answer": "Apostrophe",
      "distractors": {
        "easy": "En dash",
        "medium": "En dash",
        "hard": "En dash"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which mythical Welsh dragon did Merlin prophesy would defeat the invading Saxons?",
      "correct_answer": "Y Ddraig Goch",
      "distractors": {
        "easy": "Black Shuck",
        "medium": "Black Shuck",
        "hard": "Black Shuck"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which 18th-century typographer designed the Baskerville typeface?",
      "correct_answer": "John Baskerville",
      "distractors": {
        "easy": "Giambattista Bodoni",
        "medium": "Giambattista Bodoni",
        "hard": "Giambattista Bodoni"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "enthusiast",
      "question": "Which director helmed the 1995 anime film 'Ghost in the Shell'?",
      "correct_answer": "Mamoru Oshii",
      "distractors": {
        "easy": "Satoshi Kon",
        "medium": "Satoshi Kon",
        "hard": "Satoshi Kon"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Which 1942 Allied conference in Casablanca set the policy of 'unconditional surrender'?",
      "correct_answer": "Casablanca Conference",
      "distractors": {
        "easy": "Yalta Conference",
        "medium": "Yalta Conference",
        "hard": "Yalta Conference"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Which viral 2010 meme remixed Antoine Dodson's warning to 'Hide yo kids, hide yo wife' into an Auto-Tuned song?",
      "correct_answer": "Bed Intruder Song",
      "distractors": {
        "easy": "Friday",
        "medium": "Friday",
        "hard": "Friday"
      }
    },
    {
      "subject": "General Knowledge",
      "difficulty_tier": "specialist",
      "question": "Which artist's 2007 album 'Good Girl Gone Bad' featured the chart-topping single 'Umbrella'?",
      "correct_answer": "Rihanna",
      "distractors": {
        "easy": "Beyoncé",
        "medium": "Beyoncé",
        "hard": "Beyoncé"
      }
    }
  ]
};

const MATHS_POOL = [
  {
    "clues": [
      "I begin with the degrees in a full circle—perfect for turning on the spot.",
      "Then I divide my total by the main compass directions—neat, cardinals only.",
      "Next, I add the kilometres in a marathon; paws do love a long trot.",
      "After that, I multiply by the letters in the word 'WHISKERS'—branding is everything.",
      "Finally, I subtract the keys on a full piano—silence, but for purring."
    ],
    "reveals": [
      "A full circle has **360** degrees.",
      "My total so far is **90**—quartered nicely.",
      "A marathon is **42 kilometres**.",
      "My running total has reached **1056**—positively operatic.",
      "A full piano has **88** keys."
    ],
    "question": "Tidy sums done—what number do I finish on? ___",
    "answer": 968
  },
  {
    "beats": [
      "I begin with the degrees in a full circle—perfect for turning on the spot.",
      "Then I divide my total by the main compass directions—neat, cardinals only.",
      "Next, I add the kilometres in a marathon; paws do love a long trot.",
      "After that, I multiply by the letters in the word 'WHISKERS'—branding is everything.",
      "Finally, I subtract the keys on a full piano—silence, but for purring."
    ],
    "reveals": [
      {
        "prompt": "A full circle has **360** degrees.",
        "type": "obvious"
      },
      {
        "prompt": "My total so far is **90**—quartered nicely.",
        "type": "total"
      },
      {
        "prompt": "A marathon is **42 kilometres**.",
        "type": "specific"
      },
      {
        "prompt": "My running total has reached **1056**—positively operatic.",
        "type": "total"
      },
      {
        "prompt": "A full piano has **88** keys.",
        "type": "specific"
      }
    ],
    "question": "Tidy sums done—what number do I finish on? ___",
    "answer": 968
  },
  {
    "location": "Community Garden",
    "beats": [
      "I start with 100, the centimetres marked on the long planting tape I unrolled for the carrot bed.",
      "I add 12 for the months our little gardening club has met without skipping a session.",
      "I divide the lot by 2 because we only water on alternate days to let the soil rest.",
      "Then I add 18 for the seedlings tucked into each tray we carried over from the shed.",
      "Finally, I multiply by 3 for the trio of raised beds we filled before the sun slipped away."
    ],
    "reveals": [
      {
        "prompt": "My planting tape runs **100 centimetres** long—plenty for neat rows.",
        "type": "obvious"
      },
      {
        "prompt": "After counting twelve loyal months, my total stands at **112**.",
        "type": "total"
      },
      {
        "prompt": "We give the soil **2 days** to breathe between waterings—hence the halving.",
        "type": "obvious"
      },
      {
        "prompt": "Tray by tray, the count climbs to **74** once the seedlings join in.",
        "type": "total"
      },
      {
        "prompt": "We planted **3 raised beds** this evening, each smelling of mint and thyme.",
        "type": "specific"
      }
    ],
    "question": "Go on then—what grand garden total do I whisper? ___",
    "answer": 222
  },
  {
    "location": "Seaside Science Fair",
    "clues": [
      "I start with 24 for the hours my borrowed lighthouse lamp patiently spins each day.",
      "I add 15 tide charts I’ve pinned beside the model wave tank for curious visitors.",
      "Next, I triple the lot because three neighbouring schools signed up for my demo in a rush.",
      "Then I subtract 8 octopus puppets we hand out before the second bell.",
      "At the end I add 60 minutes for the bonus twilight workshop I promised the keenest crew."
    ],
    "reveals": [
      "A full day gifts me 24 lighthouse rotations to borrow for the story.",
      "Fifteen tide charts make the stall look like a mini harbour office.",
      "Three schools piling in means my tally leaps to 117 guests’ worth of energy.",
      "Eight puppets vanish fast—down to 109 bits of prep on paper.",
      "An extra hour adds 60 straight back, nudging the total to 169."
    ],
    "question": "Tot everything up for me—what number do I beam out? ___",
    "answer": 169
  }
];

function clone(value) {
  return JSON.parse(JSON.stringify(value));
}

function shuffle(list) {
  const arr = list.slice();
  for (let i = arr.length - 1; i > 0; i -= 1) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function drawItems(source, count) {
  if (!Array.isArray(source) || source.length === 0) return new Array(count).fill(null);
  let pool = shuffle(source);
  const out = [];
  let cursor = 0;
  for (let i = 0; i < count; i += 1) {
    if (cursor >= pool.length) {
      pool = shuffle(source);
      cursor = 0;
    }
    out.push(clone(pool[cursor]));
    cursor += 1;
  }
  return out;
}

export function buildRandomQuestionRounds() {
  const rounds = [];
  for (let round = 1; round <= 5; round += 1) {
    const hostItems = drawItems(QUESTION_POOL.host, 3);
    const guestItems = drawItems(QUESTION_POOL.guest, 3);
    rounds.push({ round, hostItems, guestItems });
  }
  return rounds;
}

export function pickRandomMathsChain() {
  if (!Array.isArray(MATHS_POOL) || MATHS_POOL.length === 0) {
    return null;
  }
  const idx = Math.floor(Math.random() * MATHS_POOL.length);
  return clone(MATHS_POOL[idx]);
}

export const HAS_FALLBACK_QUESTIONS = Array.isArray(QUESTION_POOL.host) && QUESTION_POOL.host.length > 0 && Array.isArray(QUESTION_POOL.guest) && QUESTION_POOL.guest.length > 0;
export const HAS_FALLBACK_MATHS = Array.isArray(MATHS_POOL) && MATHS_POOL.length > 0;
